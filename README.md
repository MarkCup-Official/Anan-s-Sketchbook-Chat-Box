# 安安的素描本聊天框 - CLI 修复版

这是一个将你在文本输入框中输入的文字和图片绘制到夏目安安的素描本上的工具。它能够创建出与游戏内容类似的效果，适用于微信，QQ等聊天软件。

![演示效果](img/example.png)

## 功能特点

- 🎨 低存在感：资源占用极少，配置得当的情况下可以长时间放在后台
- 🖼️ 图片支持：可自动图片到素描本指定区域(暂时仅限一张)
- 😊 表情差分：支持多种表情底图切换，丰富表达方式
- ⌨️ 快捷键操作：通过热键快速切换表情和生成图片
- 🔧 高度可配置：几乎所有参数都可以通过配置文件自定义
- 🔄 自动发送：生成图像后可自动粘贴并发送消息

## Fix 分支修复说明

- **仅修复和保留了 CLI (终端) 部分内容，不包含 GUI 内容，不承诺对 GUI 的修复和适配**
- 修复了使用 `Enter` 快捷键成功发送一次内容后，`alt` 表情切换快捷键不生效的问题
- 修复了上述问题引发的，可能性的，退出后键盘输入死锁的问题
- 添加了缓存机制，减少性能开销
- 添加了更安全的退出和进程清理机制

## 系统要求

- Windows 7 或更高版本（暂不支持 macOS/Linux）

## 安装和使用

可参考的原项目教程：
教程视频 https://www.bilibili.com/video/BV16G1mBUECy  
文本教程 https://www.bilibili.com/opus/1131995010930049048

安装和使用方法：
1. 在 Release 下载 `Anan-s-Sketchbook-Chat-Box.zip`
2. 解压到合适的路径
3. 双击 `Anan-s-Sketchbook-Chat-Box.exe` 文件运行
4. 在聊天应用中输入文字或粘贴图片
5. 按下回车键（默认热键），程序将自动生成素描本图像并发送

### 表情差分切换

通过 Alt+数字键快速切换：
- "alt+1": "#普通#"
- "alt+2": "#开心#"
- "alt+3": "#生气#"
- "alt+4": "#无语#"
- "alt+5": "#脸红#"
- "alt+6": "#病娇#"
- "alt+7": "#闭眼#"
- "alt+8": "#难受#"
- "alt+9": "#害怕#"
- "alt+0": "#激动#"
- "alt+q": "#惊讶#"
- "alt+w": "#哭泣#"

### 特殊文本效果

在文本中输入 `[]` 或 `【】` 包裹的字符会变为紫色显示。

### 配置参数

主要可配置项包括：
- 热键设置（全局热键、表情切换热键等）
- 允许运行的进程列表（如 QQ、微信等）
- 文本框和图片框的坐标范围
- 自动粘贴和发送选项
- 延迟时间（如出现故障可适当增大）
- 字体文件路径
- 底图和遮罩图路径

详细配置说明请参见 [config.yaml](config.yaml) 文件。

## 故障排除

如果遇到以下问题，请尝试相应解决方案：

1. **图像发送失败**：尝试增大 [main.py](main.py) 中的 `DELAY` 值（默认为 0.1 秒）
2. **热键无效**：确保程序具有管理员权限运行
3. **特定应用不生效**：检查 `ALLOWED_PROCESSES` 配置是否包含目标应用进程名

## 许可证

原项目基于 MIT 协议传播，仅供个人学习交流使用，不拥有相关素材的版权。进行分发时应注意不违反素材版权与官方二次创造协定。

该 fork 仓库的 fix 分支的修改和新增内容基于 0BSD 协议开源，本人不对项目负任何责任。